{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","admin/publish.js","util/Fetch.js","components/backTop.js","components/markview.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","CategoryGroup","state","checked","_this","props","categories","getCategories","_callee","regenerator_default","a","wrap","_context","prev","next","setState","isrender","fetchData","sent","data","stop","onChange","ev","target","push","id","splice","findIndex","d","nextProps","this","_this2","_this$state","value","react_default","createElement","react","map","key","_id","className","type","indexOf","htmlFor","name","PureComponent","MarkdownEditor","_this3","defaultValue","e","timer","clearTimeout","setTimeout","onkeydown","keyCode","preventDefault","positionS","selectionStart","positionE","selectionEnd","substr","textarea","_this4","_this$props","rows","placeholder","ref","node","spellCheck","onKeyDown","markview","article","getArticle","_callee2","_context2","_this5","concat","title","onSubmit","_callee3","_context3","description","content","method","body","JSON","stringify","success","console","log","Control","go","userId","goTop","document","getElementById","scrollTo","top","behavior","path","split","pathname","_this6","_this$state$article","_this$state$article$c","_this$state$article$d","_this$state$article$c2","publish_CategoryGroup","publish_MarkdownEditor","onClick","backTop","_ref","F_web_server_web_app_app_notes_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","F_web_server_web_app_app_notes_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","url","_ref2","_ref2$method","_ref2$headers","headers","_args","arguments","undefined","Content-Type","fetch","assign","then","response","ok","json","catch","err","warn","abrupt","t0","_x","apply","react__WEBPACK_IMPORTED_MODULE_5___default","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","remarkable__WEBPACK_IMPORTED_MODULE_1__","remarkable__WEBPACK_IMPORTED_MODULE_1___default","highlightjs__WEBPACK_IMPORTED_MODULE_2__","highlightjs__WEBPACK_IMPORTED_MODULE_2___default","__webpack_exports__","dangerouslySetInnerHTML","md","Remarkable","html","breaks","typographer","langPrefix","highlight","str","lang","hljs","getLanguage","configure","classPrefix","highlightAuto","core","ruler","enable","inline","__html","render","getRawMarkup"],"mappings":"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","file":"static/js/7.2e49636c.chunk.js","sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import React, { PureComponent, Fragment } from 'react';\r\nimport { Control } from 'react-keeper';\r\nimport fetchData from '../util/Fetch';\r\nimport Markview from '../components/markview';\r\nimport BackTop from '../components/backTop';\r\n\r\nclass CategoryGroup extends PureComponent {\r\n\r\n    state = {\r\n        checked: this.props.checked,\r\n        categories:[]\r\n    }\r\n\r\n    getCategories = async () => {\r\n        this.setState({ isrender: true });\r\n        const categories = await fetchData(`/api/category`);\r\n        this.setState({ categories: categories.data });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if( this.props.checked!==nextProps.checked){\r\n            this.setState({checked:nextProps.checked})\r\n        }\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const checked = [...this.state.checked];\r\n        const target = ev.target;\r\n        if (target.checked) {\r\n            checked.push(target.id);\r\n        } else {\r\n            checked.splice(checked.findIndex((d) => d === target.id), 1);\r\n        }\r\n        this.props.onChange && this.props.onChange(checked);\r\n        this.setState({ checked });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getCategories();\r\n    }\r\n\r\n    render() {\r\n        const { checked,categories } = this.state;\r\n        this.value = checked;\r\n        return (\r\n            <Fragment>\r\n                {\r\n                    categories.length > 0 ? categories.map((d) => (\r\n                        <Fragment key={d._id}>\r\n                            <input className=\"checkbox\" type=\"checkbox\" onChange={this.onChange} checked={checked.indexOf(d._id) >= 0} id={d._id} />\r\n                            <label className=\"article-tag\" htmlFor={d._id} >{d.name}</label>\r\n                        </Fragment>\r\n                    ))\r\n                        :\r\n                        <label className=\"article-tag article-tag-loading\">正在加载...</label>\r\n                }\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nclass MarkdownEditor extends PureComponent {\r\n\r\n    state = {\r\n        value: this.props.defaultValue\r\n    };\r\n\r\n    onChange = (e) => {\r\n        const value = e.target.value;\r\n        this.timer && clearTimeout(this.timer);\r\n        this.timer = setTimeout(() => {\r\n            this.setState({ value });\r\n            this.props.onChange && this.props.onChange(value);\r\n        }, 300)\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if( this.props.defaultValue!==nextProps.defaultValue){\r\n            this.setState({value:nextProps.defaultValue});\r\n            this.textarea.value = nextProps.defaultValue;\r\n        }\r\n    }\r\n\r\n    onkeydown = (e) => {\r\n        if(e.keyCode===9){\r\n            e.preventDefault();\r\n            const target = e.target;\r\n            const value = target.value;\r\n            const positionS = target.selectionStart;\r\n            const positionE = target.selectionEnd;\r\n            target.value = value.substr(0,positionS)+'  '+value.substr(positionE);\r\n            target.selectionStart = positionS+2;\r\n            target.selectionEnd = positionS+2;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { value } = this.state;\r\n        this.value = value;\r\n        const { className,rows,placeholder } = this.props;\r\n        return (\r\n            <div className={\"mark-body \"+className}>\r\n                <textarea ref={node=>this.textarea=node} placeholder={placeholder} spellCheck={false} onKeyDown={this.onkeydown} onChange={this.onChange} rows={rows} className=\"mark-textarea edit-input\" />\r\n                <div className=\"mark-preview\"><Markview value={value} /></div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default class extends PureComponent {\r\n    state = {\r\n        isrender: true,\r\n        article:{},\r\n    }\r\n\r\n\r\n    getArticle = async (id) => {\r\n        this.setState({isrender:true});\r\n        const article = await fetchData(`/api/article/${id}?admin=true`);\r\n        this.setState({ article: article.data, isrender: false });\r\n        this.title.value = article.data.title || '';\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.id = Control.path.split('publish/')[1];\r\n        if(this.id){\r\n            this.getArticle(this.id);\r\n        }\r\n        //this.getArticle();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if( Control.path.indexOf('publish/')>=0 && this.props.pathname!==nextProps.pathname && this.id!== Control.path.split('publish/')[1]){\r\n            this.id = Control.path.split('publish/')[1];\r\n            this.getArticle(this.id);\r\n        }else{\r\n            this.id = null;\r\n            this.title.value = '';\r\n            this.setState({ article: {}});\r\n        }\r\n    }\r\n\r\n    onSubmit = async () => {\r\n        const article = {\r\n            title:this.title.value,\r\n            categories:this.categories.value,\r\n            description:this.description.value,\r\n            content:this.content.value,\r\n        }\r\n        if(this.id){\r\n            //更新\r\n            const articleInfo = await fetchData(`/api/article/${this.id}`,{\r\n                method:'PUT',\r\n                body:JSON.stringify(article)\r\n            });\r\n            if(articleInfo.success){\r\n                console.log('success1')\r\n                Control.go(-1);\r\n            }\r\n        }else{\r\n            article.userId = \"5b34af1cf532152535c6c03a\"\r\n            //发布\r\n            const articleInfo = await fetchData(`/api/article`,{\r\n                method:'POST',\r\n                body:JSON.stringify(article)\r\n            });\r\n            if(articleInfo.success){\r\n                console.log('success2')\r\n                Control.go(-1);\r\n            }\r\n        }\r\n    }\r\n\r\n    goTop = () => {\r\n        document.getElementById(\"publish-con\").scrollTo({top:0,behavior: 'smooth' })\r\n    }\r\n\r\n    render() {\r\n        const {article:{categories=[],description='',content=''}} = this.state;\r\n\r\n        return (\r\n            <div className=\"container admin-container\" id=\"publish-con\">\r\n                <section className=\"main sildeUpMin\">\r\n                    <div className=\"admin-title\">标题</div>\r\n                    <input ref={node=>this.title=node} spellCheck={false} className=\"edit-input\"  />\r\n                    <div className=\"admin-title\">分类</div>\r\n                    <CategoryGroup  ref={node=>this.categories=node}  checked={categories} />\r\n                    <div className=\"admin-title\">简介</div>\r\n                    <MarkdownEditor ref={node=>this.description=node} rows={3} placeholder=\"一些简介~\" defaultValue={description} />\r\n                    <div className=\"admin-title\">正文</div>\r\n                    <MarkdownEditor ref={node=>this.content=node} className=\"admin-content\" rows={10} placeholder=\"开始写文章吧!\" defaultValue={content}  />\r\n                    <span className=\"admin-add-button\" onClick={this.onSubmit} >立即发布</span>\r\n                </section>\r\n                <BackTop onClick={this.goTop} />\r\n            </div>\r\n        )\r\n    }\r\n}","const fetchData = async (url, { method = 'GET', headers = { 'Content-Type': 'application/json' }, body } = {}) => {\r\n    try {\r\n        return await fetch(url, Object.assign({\r\n            method: method,\r\n            headers: headers,\r\n        },body?{body}:{}))\r\n        .then((response) => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            console.warn(err);\r\n        })\r\n    } catch (error) {\r\n        console.err(error)\r\n    }\r\n}\r\n\r\nexport default fetchData;","import React, { PureComponent } from 'react';\r\n\r\nexport default class extends PureComponent {\r\n    render() {\r\n        return (\r\n            <a className=\"backTop leftIn\" onClick={this.props.onClick}>\r\n                <span>\r\n                    <i className=\"iconfont icon-backtotop\"></i>\r\n                </span>\r\n            </a>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport Remarkable from 'remarkable';\r\nimport hljs from 'highlightjs';\r\nimport '../mark.css';\r\n\r\nexport default (props) => {\r\n    const getRawMarkup = (value) => {\r\n        const md = new Remarkable({\r\n            html: true,\r\n            breaks: true,\r\n            typographer: true,\r\n            langPrefix: '',\r\n            highlight: function (str, lang) {\r\n                if (lang && hljs.getLanguage(lang)) {\r\n                    try {\r\n                        hljs.configure({ classPrefix: '' });\r\n                        return hljs.highlight(lang, str).value;\r\n                    } catch (err) { }\r\n                }\r\n\r\n                try {\r\n                    hljs.configure({ classPrefix: '' });\r\n                    return hljs.highlightAuto(str).value;\r\n                } catch (err) { }\r\n\r\n                return ''; // use external default escaping\r\n            }\r\n        });\r\n        md.core.ruler.enable([\r\n            'abbr'\r\n        ]);\r\n        md.inline.ruler.enable([\r\n            'footnote_inline',\r\n            'ins',\r\n            'mark',\r\n            'sub',\r\n            'sup'\r\n        ]);\r\n        return { __html: md.render(value) };\r\n    }\r\n    return (\r\n        <div className=\"preview\" dangerouslySetInnerHTML={getRawMarkup(props.value)}></div>\r\n    )\r\n}"],"sourceRoot":""}