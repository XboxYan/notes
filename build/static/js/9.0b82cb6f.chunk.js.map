{"version":3,"sources":["admin/article.js","util/Fetch.js","components/footer.js","components/pager.js"],"names":["pagesize","state","articles","total","isrender","getArticle","_callee","page","_args","arguments","F_web_server_web_app_app_notes_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","prev","next","length","undefined","_this","setState","fetchData","concat","sent","data","counts","stop","onhandle","dir","_this$state","$page","Math","max","min","ceil","this","_this$state2","react__WEBPACK_IMPORTED_MODULE_7___default","createElement","className","map","article","key","_id","react_keeper__WEBPACK_IMPORTED_MODULE_13__","to","title","moment","createdAt","utcOffset","format","views","categories","category","i","name","_components_loader__WEBPACK_IMPORTED_MODULE_10__","type","_components_pager__WEBPACK_IMPORTED_MODULE_11__","fetch","_components_footer__WEBPACK_IMPORTED_MODULE_9__","PureComponent","_ref","Object","F_web_server_web_app_app_notes_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","mark","url","_ref2","_ref2$method","method","_ref2$headers","headers","body","Content-Type","assign","then","response","ok","json","catch","err","console","warn","abrupt","t0","_x","apply","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","__webpack_exports__","id","href","rel","target","go","_this$props","props","_this$props$pageInfo","pageInfo","startCursor","endCursor","after","before","_this$props2","react__WEBPACK_IMPORTED_MODULE_5___default","data-hidden","onClick"],"mappings":"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","file":"static/js/9.0b82cb6f.chunk.js","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport fetchData from '../util/Fetch';\r\nimport Footer from '../components/footer';\r\nimport Loader from '../components/loader';\r\nimport Pager from '../components/pager';\r\nimport moment from 'moment';\r\nimport { CacheLink } from 'react-keeper';\r\n\r\nexport default class extends PureComponent {\r\n    pagesize = 5;\r\n\r\n    state = {\r\n        articles:[],\r\n        total:0,\r\n        isrender:true\r\n    }\r\n\r\n    getArticle = async (page=1) => {\r\n        this.setState({isrender:true});\r\n        const articles = await fetchData(`/api/article?page=${page}&pagesize=${this.pagesize}`);\r\n        this.setState({articles:articles.data,total:articles.counts,isrender:false});\r\n    }\r\n\r\n    onhandle = (dir) => () => {\r\n        const { total, page } = this.state;\r\n        let $page = Math.max(Math.min(page + dir,Math.ceil(total/this.pagesize)),1);\r\n        this.getArticle($page);\r\n    }\r\n\r\n    componentDidMount () {\r\n        this.getArticle(1);\r\n    }\r\n\r\n    render() {\r\n        const {articles,total,isrender} = this.state;\r\n        return (\r\n            <div className=\"container\">\r\n                <section className=\"main sildeUpMin\">\r\n                    <span className=\"page-title\">共{total}篇文章</span>\r\n                    <table className=\"table-con\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>_id</th>\r\n                                <th>标题</th>\r\n                                <th>发布时间</th>\r\n                                <th>访问量</th>\r\n                                <th>分类</th>\r\n                                <th>操作</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                !isrender && articles.map(article=>(\r\n                                    <tr key={article._id}>\r\n                                        <td>{article._id}</td>\r\n                                        <td><CacheLink to={\"/article/\"+article._id}>{article.title}</CacheLink></td>\r\n                                        <td>{moment(article.createdAt).utcOffset(8).format(\"YYYY年M月D日 , HH:mm:ss\")}</td>\r\n                                        <td>{article.views}</td>\r\n                                        <td>{article.categories.map((category,i)=><CacheLink key={i} className=\"article-tag\" to={\"/categories/\"+category._id}>{category.name}</CacheLink>)}</td>\r\n                                        <td>\r\n                                            <CacheLink className=\"tag-wrap\" to={'admin/publish/'+article._id} >编辑</CacheLink>\r\n                                            <a className=\"tag-wrap\">删除</a>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            }\r\n                        </tbody>\r\n                    </table>\r\n                    {\r\n                        isrender&&<Loader/>\r\n                    }\r\n                    <CacheLink type=\"span\" className=\"admin-add-button\" to=\"/admin/publish\" >现在发布</CacheLink>\r\n                    <Pager\r\n                        total={total}\r\n                        pagesize={this.pagesize}\r\n                        fetch={this.getArticle}\r\n                    />\r\n                </section>\r\n                <Footer />\r\n            </div>\r\n        )\r\n    }\r\n}","const fetchData = async (url, { method = 'GET', headers = { 'Content-Type': 'application/json' }, body } = {}) => {\r\n    try {\r\n        return await fetch(url, Object.assign({\r\n            method: method,\r\n            headers: headers,\r\n        },body?{body}:{}))\r\n        .then((response) => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            console.warn(err);\r\n        })\r\n    } catch (error) {\r\n        console.err(error)\r\n    }\r\n}\r\n\r\nexport default fetchData;","import React from 'react';\r\n\r\nexport default () => (\r\n    <footer id=\"footer\">\r\n        <div className=\"footer-copyright\">\r\n            © 2018 XboxYan<br />\r\n            Theme By \r\n            <a href=\"https://github.com/Lemonreds/hexo-theme-Nayo\" rel=\"noopener noreferrer\" target=\"_blank\"> Nayo</a>\r\n        </div>\r\n    </footer>\r\n)","import React, { PureComponent } from 'react';\r\n\r\nexport default class extends PureComponent {\r\n    state = {\r\n        page: 1,\r\n    }\r\n\r\n    go = (dir) => () => {\r\n        const { page } = this.state;\r\n        const { total, pagesize,pageInfo:{startCursor,endCursor} } = this.props;\r\n        let $page = Math.max(Math.min(page + dir, Math.ceil(total / pagesize)), 1);\r\n        this.setState({ isrender: true, page:$page });\r\n        this.props.fetch && this.props.fetch(dir>0?{after:endCursor}:{before:startCursor});\r\n    }\r\n\r\n    render() {\r\n        const { total, pagesize } = this.props;\r\n        const max = Math.ceil(total / pagesize);\r\n        const { page } = this.state;\r\n        return (\r\n            total?\r\n            <nav className=\"paginator scrollIn\">\r\n                <a className=\"prev\" data-hidden={page === 1} onClick={this.go(-1)}><i className=\"iconfont icon-left\"></i>上一页</a>\r\n                <span className=\"page-number\">Page {page} / {max}.</span>\r\n                <a className=\"next\" data-hidden={page === max} onClick={this.go(1)}>下一页<i className=\"iconfont icon-right\"></i></a>\r\n            </nav>\r\n            :null\r\n        )\r\n    }\r\n}\r\n"],"sourceRoot":""}